@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<ContentModels.Content>
@using Clean.Core.Models.ViewModels
@using ContentModels = Umbraco.Cms.Web.Common.PublishedModels

@{
    Layout = "master.cshtml";

}

@await Html.PartialAsync("~/Views/Partials/pageHeader.cshtml", new PageHeaderViewModel(Model.Name, Model.Title,
Model.Subtitle, Model.MainImage))
<div class="container-fluid content">
    <div class="row sidebar">
        <div class="col-4 col-md-3 col-lg-2 col-xxxl-1 border-end">
            <aside>
                @{
                    var site = Model.AncestorOrSelf(2);
                    var parent = site.DescendantsOfType("content");
                }

                <h1 class="h6 mt-3">@(site.Name())</h1>

                <ul class="nav flex-column mb-auto">
                    @foreach (var child in parent)
                    {
                        <li class="nav-item">
                            <a class="nav-link @(child.IsAncestorOrSelf(Model) ? "active" : null)" href="@child.Url()">@child.Name</a>

                                <ul class="nav flex-column">
                                    @foreach (var subChild in child.Children)
                                    {
                                        <li class="nav-item">
                                            <a class="nav-link @(subChild.IsAncestorOrSelf(Model) ? "active" : null)" href="@subChild.Url()">@subChild.Name</a>
                                        </li>
                                    }
                                </ul>
                        </li>
                    }
                </ul>           
            </aside>
        </div>
        <div class="col-8 col-md-9 col-lg-10 col-xxxl-11">
            <article>
                @Html.GetGridHtml(Model, "mainContent", "Aide")
            </article>
        </div>
    </div>
</div>
